(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const u=[{name:"All tasks",value:""},{name:"Pending",value:"isPending"},{name:"In Progress",value:"isInProgress"},{name:"Completed",value:"isCompleted"}];class g{constructor(e){this.description=e}}class C extends g{constructor(e){super(e),this.isPending=!0,this.isInProgress=!1,this.isCompleted=!1}}class L{constructor(e){this.tasks=JSON.parse(window.localStorage.getItem("todotasks"))||[],this.filteredTasks=[],this.container=e||document.body,this.toolsContainer,this.listContainer,this.init()}init(){this.container.innerHTML="",this.toolsContainer=document.createElement("div"),this.toolsContainer.classList.add("tools-container"),this.container.appendChild(this.toolsContainer),this.listContainer=document.createElement("div"),this.listContainer.classList.add("list-container"),this.container.appendChild(this.listContainer),this.addPromptFormForAddingTasks(),this.addSelect(),this.render(this.tasks)}render(e){this.listContainer.innerHTML="",this.addListWithTasks(e)}addTaskToList(e){e.length>0?(this.tasks.push(new C(e)),this.saveTaskInLocalStorage()):alert("The task must contain a description!"),this.render(this.tasks)}addListWithTasks(e){const n=document.createElement("ul");n.className="todo-list",e.forEach((t,s)=>{const i=document.createElement("li");i.classList.add("task");const o=document.createElement("div");o.title="Start task";const m=document.createTextNode("⯈");o.appendChild(m),o.className="task-button",o.addEventListener("click",()=>{t.isInProgress=!0,t.isPending=!1,a(t,i,o,d),this.saveTaskInLocalStorage()});const d=document.createElement("div");d.title="Complete task";const p=document.createTextNode("✔");d.appendChild(p),d.className="task-button",d.addEventListener("click",()=>{if(t.isPending){alert("You need to start the task first!");return}t.isInProgress=!1,t.isPending=!1,t.isCompleted=!0,a(t,i,o,d),this.saveTaskInLocalStorage()});const r=document.createElement("div");r.title="Delete task";const f=document.createTextNode("✖");r.appendChild(f),r.className="task-button",r.addEventListener("click",()=>{if(!t.isCompleted){alert("Can not delete incomplete task!");return}n.removeChild(i),this.tasks=this.tasks.slice(0,s).concat(this.tasks.slice(s+1,this.tasks.length)),this.saveTaskInLocalStorage(),this.render(this.tasks)});const h=document.createElement("div");h.innerHTML=t.description,i.appendChild(h),a(t,i,o,d);const l=document.createElement("div");l.classList.add("buttons-container"),l.appendChild(o),l.appendChild(d),l.appendChild(r),i.appendChild(l),n.appendChild(i)}),this.listContainer.appendChild(n);function a(t,s,i,o){t.isCompleted&&(s.classList.add("task-completed"),i.classList.add("disabled-button"),o.classList.add("disabled-button")),t.isInProgress&&(s.classList.add("task-inprogress"),i.classList.add("disabled-button"))}}addSelect(){const e=document.createElement("select");e.id="selectList",e.classList.add("selectlist"),e.addEventListener("change",t=>{this.filteredTasks=t.target.value.length>0?this.tasks.filter(s=>s[t.target.value]):this.tasks,this.render(this.filteredTasks)}),this.toolsContainer.appendChild(e);for(var n=0;n<u.length;n++){var a=document.createElement("option");a.value=u[n].value,a.text=u[n].name,e.appendChild(a)}}addPromptFormForAddingTasks(){const e=document.createElement("input");e.classList.add("input-task-field");const n=document.createElement("button");n.classList.add("button-task-field"),e.autofocus=!0,e.placeholder=n.innerText="Add Task",n.addEventListener("click",()=>{this.addTaskToList(e.value),e.value="",document.getElementById("selectList").value=""}),this.toolsContainer.appendChild(e),this.toolsContainer.appendChild(n)}saveTaskInLocalStorage(){window.localStorage.setItem("todotasks",JSON.stringify(this.tasks))}}new L(document.getElementById("app"));
